# Application
spring.application.name=event-hub-backend
server.port=8081

# Supabase PostgreSQL Connection (Transaction Pooler - Port 6543)
# Using Transaction mode instead of Session mode for better connection pooling
# IMPORTANT: Use port 6543 for Transaction mode, NOT 5432 (Session mode)
# Region: Mumbai (ap-south-1) for optimal India latency
spring.datasource.url=jdbc:postgresql://aws-1-ap-south-1.pooler.supabase.com:6543/postgres?prepareThreshold=0
spring.datasource.username=postgres.aoyvpquvjxofdkukmqty
spring.datasource.password=event@9060dbpassword

spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.generate_statistics=false

# Fix for PostgreSQL prepared statement conflicts with connection poolers (Supabase Session Pooler)
# Disable server-side prepared statements to avoid "prepared statement already exists" errors
spring.datasource.hikari.data-source-properties.prepareThreshold=0
spring.jpa.properties.hibernate.jdbc.batch_size=0
spring.jpa.properties.hibernate.order_inserts=false
spring.jpa.properties.hibernate.order_updates=false

# Connection Pool - AGGRESSIVE settings for Supabase Transaction Pooler
# Reduced to minimum to avoid connection exhaustion
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=180000
spring.datasource.hikari.max-lifetime=300000
spring.datasource.hikari.keepalive-time=60000
spring.datasource.hikari.validation-timeout=3000
spring.datasource.hikari.leak-detection-threshold=30000
# Force connection release
spring.datasource.hikari.auto-commit=true

# Logging - reduced for performance
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.com.zaxxer.hikari=WARN

# JWT Configuration
jwt.secret=your-secret-key-change-this-in-production-min-256-bits-required-for-hmac-sha256-algorithm
jwt.expiration=86400000

# Trigger deployment - Tue Dec  9 19:50:35 IST 2025

# Token Payment Configuration
payment.token.percentage=25

# Payment Gateway Configuration (mock for development)
payment.gateway.url=https://api.razorpay.com
payment.gateway.key=${RAZORPAY_KEY:rzp_test_mock}
payment.gateway.secret=${RAZORPAY_SECRET:mock_secret}

# Refund Policy Configuration
refund.full.days=30
refund.partial.days=15
refund.partial.percentage=50

# Google OAuth Configuration
google.client.id=386113169-ugec31n5ft8uj6gmjtq8o112n7uqe8re.apps.googleusercontent.com
